** GSI Common Meson is a common definitions for creating any GSI software with meson build system
---
## Repository Include
1. common/meson.build define global projects settings to compile host as same as ARC applicatiosn
2. generator for GSI APL Preprocessor
3. generator for GSI Belex-aot Preprocessor
3. generator and corresponded scripts for MODTOOL
4. Cross platform files for COmpiler and Linker configurations: L3 and L4 layout

---
## Requarements
1. before run build please setup Synopsis toolchain for your prefered location, for example : source ~/efs_local/data/public/synopsis/ARC-2018.06/env_set_dv.env
2. GSI meson build system requared internal GSI version of MESON what can istalled from :
        1. GSI PIP repository cancun-vm: pip3 install meson -i http://cancun-vm:8081/repository/gsi-pypi/simple --trusted-host cancun-vm
        2. sources https://bitbucket.org/gsitech/gsi-meson/src/release_0.59.1.GSI/
3. this gsi-common-meson should be subproject ([look MESON help to details](https://mesonbuild.com/Subprojects.html)) of any GSI application
4. sceleton of application or library project can be generated by MESON (TBD)
---
## Using
* each GSI application/library/etc project should include GSI Common Meson
* exactly after project definition as subprojects object
* in addition for more sumple usage also subdir into it
* in addition if project will support to be subprojects its requared make software link in him tree to gsi-common-meson
for example
---


    project(
        'my best project', 'c',
        version: '12.34.567',
        meson_version : '>= 0.59.4.24'
    )
    
    gsi_common_meson = subproject('gsi-common-meson',version: '>=0.2',required:true)
    if meson.is_subproject()
        message('Dirty workaround: soft link to other subproject: gsi-common-meson, for allow subdir into it for make all variables availabe without get_variable() ')
        r = run_command('ln', '-s', './../../gsi-common-meson', 'subprojects/gsi-common-meson')
        if r.returncode() != 0
            errortxt = r.stderr().strip()
            message(errortxt)
        endif
    endif
    subdir('subprojects/gsi-common-meson/common')

---

to setup with meson project run

---
    meson setup <folder_where_will_all_intermidiat_files_and_final_artefacts>
---

by default meson setup in debug configuration for GSI simulator
additional option

---
    --buildtype=release : compile release version
    --cross-file ./subprojects/gsi-common-meson/cross-files/archs36_l4.txt: compile for HW with L4 layout
    --wrap-mode=forcefallback : avoid using system installed libraries and use all dependecies with sourced that will downloaded from GSI git repository
---

exampel command for setup release version for HW with all sources for L4 layout into folder "build_hw_src"

---
    meson setup build_hw_src --buildtype=release --cross-file ./subprojects/gsi-common-meson/cross-files/archs36_l4.txt --wrap-mode=forcefallback
---

following command will compile it

---
    meson compile -C build_hw_src
---